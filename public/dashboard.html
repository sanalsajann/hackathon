<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="dashboard.css">
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <div class="logo">COAL MITHRA</div>
            <ul class="nav-links">
                <li><a href="dashboard.html">Dashboard</a></li>
                <li><a href="employees_dashboard.html">Employees</a></li>
                <li><a href="machine_dashboard.html">Machines</a></li>
                <li><a href="circulars_dashboard.html">Circulars</a></li>
                <li><a href="safety_report.html">Reports</a></li>
            </ul>
            <a href="index.html" class="logout-btn">Logout</a>
        </aside>
        
        <main class="main-content">
            <header>
                <h1>Dashboard</h1>
                <div class="user" id="user-type">Supervisor</div>
            </header>
            <section class="cards">
                <div class="card blue">
                    <h3>Supervisor Details</h3>
                    <p id="supervisor-id">Supervisor ID: Loading...</p>
                    <p id="supervisor-name">Supervisor Name: Loading...</p>
                    
                </div>
                <div class="card green">
                    <h3>Shift Timing</h3>
                    <p>Time In: 08:00 AM</p>
                    <p>Time Out: 06:00 PM</p>
                </div>
            </section>
               
            <!-- New Section for Total Numbers -->
            <section class="summary-cards">
                <div class="summary-card">
                    <h3>Total Employees</h3>
                    <p>150</p>
                </div>
                <div class="summary-card">
                    <h3>Total Machines</h3>
                    <p>35</p>
                </div>
                <div class="summary-card">
                    <h3>Total Sectors</h3>
                    <p>8</p>
                </div>
            </section>

            <!-- Graph Section -->
            <section class="graph-section">
                <div class="graph">
                    <h3>GRAPH1</h3>
                    <img src="graph1.jpg" alt="Random Graph 1">
                </div>
                <div class="graph">
                    <h3>GRAPH2</h3>
                    <img src="graph2.jpeg" alt="Random Graph 2">
                </div>
            </section>
        </main>
    </div>

    <script>
        // Function to get supervisor details
        async function getSupervisorDetails() {
            try {
                const supervisorId = sessionStorage.getItem('supervisorId');
                
                if (!supervisorId) {
                    document.getElementById('supervisor-id').innerText = `Supervisor ID: Not found`;
                    document.getElementById('supervisor-name').innerText = `Supervisor Name: Not found`;
                    return;
                }

                const response = await fetch(`/supervisor-details?supervisorId=${supervisorId}`);
                const data = await response.json();

                if (response.ok) {
                    document.getElementById('supervisor-id').innerText = `Supervisor ID: ${data.id}`;
                    document.getElementById('supervisor-name').innerText = `Supervisor Name: ${data.name}`;
                } else {
                    document.getElementById('supervisor-id').innerText = `Supervisor ID: Not found`;
                    document.getElementById('supervisor-name').innerText = `Supervisor Name: Not found`;
                }
            } catch (error) {
                console.error('Error fetching supervisor details:', error);
            }
        }

        // Fetch supervisor details on page load
        getSupervisorDetails();
    </script>
</body>
</html>
