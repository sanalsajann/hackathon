<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shift In - Coal Mining</title>
    <!-- Link to Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Raleway:ital,wght@0,100..900;1,100..900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="shtin.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>
<body>
    <!-- Shift In Form -->
    <div class="container">
        <!-- Left section with logo and text -->
        <div class="left-section">
            <div class="logo">
                <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAiJJREFUSEvF1s/rDlEUx/HXV5FCkQVW5Ed+/gFs/NrIUkhIEmUjWbFRbCwkWbCwwM6vFDtJEkn8AbLACgtWhCKEOd9mvk3zzDzPnfk++t566pmZc877nnvPveczYoLGyARxdQEvw0rMwwx8xHs8x5fURFLB03AUu7C4IfgvPMAF3B00gRTw7iyzs5gzKFjp+z0cxNsmn37gKbiEPS2AZdNP2ILHdf5N4IDex7qO0MLtD7bjdjVOHTje3cwd+nFP4wdWY1Mfw59Yn9k8K9vUgXfiWkKms/A5+x3BuQH2b7JkluN3YVcFT8JrLBwyOMLtx5UmcBRDz340TKJNxhHiFZY2gW9gR0K2YdIWHD5x8byMP9Wl/orp/xEcl9CZKngm4uyljiLjbThU47QA8yvvL2fX64EqeEm+D23BTfYncaLy8VF2oWyoghchyj51FBm3AT/B2ip4Kr6nUvG0fC4Tl/p63mh6iutDy2bQYp6jpqeyyR6vq+o44PvaRmthvybv2z0Zb07ppS1AZdNokWNVXj3H8fwCKzoG7+d2GOcLg7omEefy1pDB73LlEp1qdDT146tF9Q1hAgGLvh6abGw0gSdnfTbky8Zxgv/md3/PCg6SPhfHUeXRq7dmF8bDusmniL29udib3SL7O7lA6CT2ypzQz8cQ6qRJJMRehryNyo1t6jtSMq4GWIUQ9XNLgj6qNjTVt0HAQVWd6t/ZrkvGnWFlx3/FKFofDExSYgAAAABJRU5ErkJggg=="/>
            </div>
            <h2>SHIFT IN</h2>
            <p> @ Powered by coalmitra</p>
        </div>

        <!-- Right section with form -->
        <div class="right-section">
            <h3>ENTER THE DETAILS HERE</h3>
            <form id="shiftForm">
                <label for="full-name">Full name</label>
                <input type="text" id="full-name" name="full-name" placeholder="Full name" required>

                <!-- Shift Time Field -->
                <label for="shifttime">Select Shift Time:</label>
                <select id="shifttime" name="shifttime" required>
                    <option value="" disabled selected hidden>Select shift time</option>
                    <option value="6AM-2PM">6AM - 2PM</option>
                    <option value="2PM-10PM">2PM - 10PM</option>
                    <option value="10PM-6AM">10PM - 6AM</option>
                </select>

                <label for="sector">Select the sector:</label>
                <select id="sector" name="sector" required>
                    <option value="" disabled selected hidden>Select sector</option>
                    <option value="sector1">North-East</option>
                    <option value="sector2">North-West</option>
                    <option value="sector3">South-East</option>
                    <option value="sector4">South-West</option>
                </select>

                <label for="setno">Select the setno:</label>
                <select id="setno" name="setno" required>
                    <option value="" disabled selected hidden>Select setno</option>
                    <option value="setno1">Setno 1</option>
                    <option value="setno2">Setno 2</option>
                    <option value="setno3">Setno 3</option>
                </select>

                <label for="machine">Select the machine:</label>
                <select id="machine" name="machine" required>
                    <option value="" disabled selected hidden>Select machine</option>
                    <option value="dragline">Dragline</option>
                    <option value="shovel">Shovel</option>
                    <option value="dumper">Dumper</option>
                    <option value="dozer">Dozer</option>
                    <option value="drill">Drill</option>
                </select>
                <label for="supervisor_id">Supervisor ID:</label>
                <input type="text" id="supervisor_id" name="supervisor_id" placeholder="Supervisor ID" required>

                <button type="submit">Submit</button>
            </form>
        </div>
    </div>

    <script>
        // Handle Shift Form Submission
        document.getElementById('shiftForm').addEventListener('submit', async (e) => {
            e.preventDefault();  // Prevent the form from submitting in the default way

            // Capture form data
            const fullName = document.getElementById('full-name').value;
            const shiftTime = document.getElementById('shifttime').value;
            const sector = document.getElementById('sector').value;
            const setNo = document.getElementById('setno').value;
            const machine = document.getElementById('machine').value;
            const supervisor_id = document.getElementById('supervisor_id').value;

            // Create a data object to send to the server
            const data = {
                fullName: fullName,
                shiftTime: shiftTime,
                sector: sector,
                setNo: setNo,
                machine: machine,
                supervisor_id:supervisor_id
            };

            // Send data to the server via POST request
            try {
                const response = await fetch('/submit-shift', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data),
                });

                const result = await response.json();

                if (response.ok) {
                    alert('Data submitted successfully!');
                } else {
                    alert('Failed to submit data: ' + result.message);
                }
            } catch (error) {
                console.error('Error:', error);
                alert('An error occurred while submitting the data.');
            }
        });
    </script>
</body>
</html>
